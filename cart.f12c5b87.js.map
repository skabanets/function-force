{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-5a6d7c68a8b9454d.js","node_modules/@parcel/runtime-js/lib/runtime-643dfc921be0cb37.js","src/js/components/cart/template.js","src/js/components/cart/total-price.js","src/js/components/cart/products-list.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"d3pfZ\\\":\\\"cart.f12c5b87.js\\\",\\\"lp5u4\\\":\\\"sprite.f1a06e51.svg\\\",\\\"9lroz\\\":\\\"index.28e15f47.js\\\"}\"));","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lp5u4\")).toString();","import sprite from '../../../images/sprite.svg';\nimport * as localStorage from '../../storage';\n\n// TODO: use one object for all local storage items keys\nconst productsInCart = localStorage.getItem('bucket');\n\nconst productCardTemplate = product => {\n  return `<li class=\"checkout-products-list-item\" data-id=\"${product._id}\">\n          <div class=\"checkout-product-item-card\">\n            <div class=\"checkout-product-item-card-img\">\n              <img\n                class=\"checkout-product-img lazy\"\n                src=\"${product.img}\"\n                alt=\"${product.name}\"\n                width=\"64\"\n                height=\"64\"\n                loading=\"lazy\"\n              />\n            </div>\n            <div class=\"product-item-card-details\">\n              <div class=\"product-item-attributes\">\n                <h3 class=\"product-item-name\">${product.name}</h3>\n                <p class=\"product-item-category\">\n                  <span class=\"product-item-catogry-label\">Category: </span>\n                  <span class=\"product-item-category-name\">${\n                    product.category\n                  }</span>\n                </p>\n                <p class=\"product-item-size\">\n                  <span class=\"product-item-size-label\">Size: </span\n                  ><span class=\"product-item-size-name\">${product.size}</span>\n                </p>\n              </div>\n              <div class=\"product-item-price-qty\">\n                <div class=\"product-item-price\">$${parseFloat(\n                  product.price\n                ).toFixed(2)}</div>\n                <div class=\"product-item-qty\">\n                  <button class=\"qty-decrement-btn\">\n                    <svg class=\"icon-qty-decrement\" width=\"14\" height=\"14\">\n                      <use href=\"${sprite}#icon-minus\"></use>\n                    </svg>\n                  </button>\n                  <span class=\"product-qty-value\">${\n                    productsInCart.filter(item => item.id === product._id).pop()\n                      .amount\n                  }</span>\n                  <button class=\"qty-increment-btn\">\n                    <svg class=\"icon-qty-increment\" width=\"14\" height=\"14\">\n                      <use href=\"${sprite}#icon-plus\"></use>\n                    </svg>\n                  </button>\n                </div>\n              </div>\n            </div>\n            <button class=\"remove-item-btn\" type=\"button\">\n              <svg class=\"remove-item-btn-icon\" width=\"18\" height=\"18\">\n                <use href=\"${sprite}#icon-ion_close-sharp\"></use>\n              </svg>\n            </button>\n          </div>\n        </li>`;\n};\n\nexport default productCardTemplate;\n","import { getItem } from '../../storage';\n\nconst priceTitle = document.querySelector('.js-total-price');\n\nexport const countTotalPrice = () => {\n  const orders = getItem('bucket');\n  const totalValue = orders\n    .reduce((total, { amount, price }) => {\n      return total + amount * Number(price);\n    }, 0)\n    .toFixed(2);\n\n  const totalPrice = String(totalValue).replace(/\\./g, ',');\n  priceTitle.innerHTML = `&#36;${totalPrice}`;\n};\n","import productCardTemplate from './template';\nimport * as localStorage from '../../storage';\nimport * as foodAPI from '../../api';\nimport { renderQuantityOrders } from '../basket-quantity-of-products';\nimport { countTotalPrice } from './total-price';\nimport LazyLoad from 'vanilla-lazyload';\n\nconst lazyLoadInstance = new LazyLoad();\n\nconst refs = {\n  container: document.querySelector('.checkout-products-list'),\n  deleteAllProductsBtn: document.querySelector('.delete-all-products-btn'),\n  emptyCartSection: document.querySelector('.empty-cart-section'),\n  shoppingCartSection: document.querySelector('.shopping-cart-section'),\n};\n\n/**\n  |============================\n  | Utils\n  |============================\n*/\nconst showEmptyCartContainer = () => {\n  refs.shoppingCartSection.classList.add('hidden');\n  refs.emptyCartSection.classList.remove('hidden');\n};\nconst showCartContainer = () => {\n  refs.shoppingCartSection.classList.remove('hidden');\n  refs.emptyCartSection.classList.add('hidden');\n};\n\n/**\n  |============================\n  | Event Listeners\n  |============================\n*/\n// REMOVE ONE PRODUC\nconst onItemRemoveBtnClick = event => {\n  if (\n    !event.target.closest('button') ||\n    !event.target.closest('button').classList.contains('remove-item-btn')\n  ) {\n    return;\n  }\n\n  // TODO: use one object for all local storage items keys\n  const productsInCart = localStorage.getItem('bucket');\n\n  // Get product Id\n  const productId = event.target.closest('li').dataset.id;\n\n  // Remove product Id from local Storage\n  const bucket = productsInCart.filter(item => item.id !== productId);\n  localStorage.setItem('bucket', bucket);\n\n  // Remove element from a list\n  event.target.closest('li').classList.add('hide-list-item');\n  setTimeout(() => {\n    event.target.closest('li').remove();\n    renderQuantityOrders();\n    countTotalPrice();\n\n    // If Shopping cart is empty, then show empty cart conteiner\n    if (bucket.length === 0) {\n      showEmptyCartContainer();\n    }\n  }, 1000);\n};\n\n// REMOVE ALL PRODUCTS\nconst onRemoveAllBtnClick = event => {\n  // Remove all items from bucket\n  localStorage.setItem('bucket', []);\n\n  // Remove items from a list\n  for (const item of refs.container.children) {\n    item.classList.add('hide-list-item');\n  }\n\n  renderQuantityOrders();\n  // Show empty Cart container\n  setTimeout(() => {\n    showEmptyCartContainer();\n  }, 800);\n};\n\n// CHANGE QTY\nconst onChangeQtyBtnClick = event => {\n  const button = event.target.closest('button');\n  if (\n    !button ||\n    (!button.classList.contains('qty-increment-btn') &&\n      !button.classList.contains('qty-decrement-btn'))\n  ) {\n    return;\n  }\n\n  // TODO: use one object for all local storage items keys\n  const productsInCart = localStorage.getItem('bucket');\n\n  const productId = event.target.closest('li').dataset.id;\n  const qtyValue = event.target\n    .closest('.product-item-price-qty')\n    .querySelector('.product-qty-value');\n\n  const bucket = productsInCart.map(product => {\n    if (product.id === productId) {\n      const qty = button.classList.contains('qty-increment-btn')\n        ? product.amount + 1\n        : product.amount > 1\n        ? product.amount - 1\n        : 1;\n\n      // Update UI\n      qtyValue.innerHTML = qty;\n\n      return { id: product.id, amount: qty, price: product.price };\n    }\n    return product;\n  });\n\n  // Update Local Storage\n  localStorage.setItem('bucket', bucket);\n  // Update Total Price\n  countTotalPrice();\n};\n\n// Add event listener on click remove item button\nrefs.container.addEventListener('click', onItemRemoveBtnClick);\nrefs.container.addEventListener('click', onChangeQtyBtnClick); // TODO: use ONLY one event listener\nrefs.deleteAllProductsBtn.addEventListener('click', onRemoveAllBtnClick);\n\n/**\n  |============================\n  | Rendering List of Products\n  |============================\n*/\nconst getProductsData = async productsInCart => {\n  const data = await Promise.all(\n    productsInCart.map(\n      async product => await foodAPI.getProductById(product.id)\n    )\n  );\n\n  return data;\n};\n\nconst renderProductsList = async () => {\n  try {\n    // TODO: use one object for all local storage items keys\n    const productsInCart = localStorage.getItem('bucket');\n\n    // Get Product Data from a server\n    const productsData = await getProductsData(productsInCart);\n\n    // Show empty cart container if nothing added to the cart\n    if (productsData.length === 0) {\n      showEmptyCartContainer();\n    } else {\n      showCartContainer();\n    }\n\n    // Generate Markup and update our container\n    const markup = productsData.map(productCardTemplate).join('');\n    refs.container.innerHTML = markup;\n\n    lazyLoadInstance.update();\n    renderQuantityOrders();\n    countTotalPrice();\n  } catch (error) {\n    // TODO: process Errors\n    console.log(error);\n  }\n};\n\nrenderProductsList();\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$a4212a039eccdb43$exports","URL","resolve","import","meta","url","toString","$27067ef150b14ccc$var$productsInCart","getItem","$27067ef150b14ccc$export$2e2bcd8739ae039","product","_id","img","name","category","size","parseFloat","price","toFixed","$parcel$interopDefault","filter","item","pop","amount","$5uEKZ","$b4729eceabf71c1a$var$priceTitle","document","querySelector","$b4729eceabf71c1a$export$a7c9f95ca8a7c1b2","totalValue","reduce","total","Number","totalPrice","String","replace","innerHTML","$4404b56549051f3a$var$lazyLoadInstance","$4404b56549051f3a$var$refs","container","deleteAllProductsBtn","emptyCartSection","shoppingCartSection","$4404b56549051f3a$var$showEmptyCartContainer","classList","add","remove","addEventListener","event","target","closest","contains","productsInCart","productId","dataset","bucket","setItem","setTimeout","$bA0jZ","renderQuantityOrders","button","qtyValue","map","qty","children","async","productsData","Promise","all","$7rYDH","getProductById","$4404b56549051f3a$var$getProductsData","markup","join","update","error","console","log","$4404b56549051f3a$var$renderProductsList"],"version":3,"file":"cart.f12c5b87.js.map"}