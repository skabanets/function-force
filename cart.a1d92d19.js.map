{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-f57299844a46d647.js","src/js/components/cart/products-list.js","node_modules/@parcel/runtime-js/lib/runtime-9a25682e7c710545.js","src/js/components/cart/template.js","src/js/components/cart/total-price.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"86U9d\\\":\\\"cart.a1d92d19.js\\\",\\\"ee16w\\\":\\\"sprite.f1a06e51.svg\\\",\\\"de1dt\\\":\\\"index.193154c3.js\\\"}\"));","import productCardTemplate from './template';\nimport * as localStorage from '../../storage';\nimport * as foodAPI from '../../api';\nimport { renderQuantityOrders } from '../basket-quantity-of-products';\nimport { countTotalPrice } from './total-price';\nimport LazyLoad from 'vanilla-lazyload';\n\nconst lazyLoadInstance = new LazyLoad();\n\nconst refs = {\n  container: document.querySelector('.checkout-products-list'),\n  deleteAllProductsBtn: document.querySelector('.delete-all-products-btn'),\n  emptyCartSection: document.querySelector('.empty-cart-section'),\n  shoppingCartSection: document.querySelector('.shopping-cart-section'),\n};\n\n/**\n  |============================\n  | Utils\n  |============================\n*/\nconst showEmptyCartContainer = () => {\n  refs.shoppingCartSection.classList.add('hidden');\n  refs.emptyCartSection.classList.remove('hidden');\n};\nconst showCartContainer = () => {\n  refs.shoppingCartSection.classList.remove('hidden');\n  refs.emptyCartSection.classList.add('hidden');\n};\n\n/**\n  |============================\n  | Event Listeners\n  |============================\n*/\n// REMOVE ONE PRODUC\nconst onItemRemoveBtnClick = event => {\n  if (\n    !event.target.closest('button') ||\n    !event.target.closest('button').classList.contains('remove-item-btn')\n  ) {\n    return;\n  }\n\n  // TODO: use one object for all local storage items keys\n  const productsInCart = localStorage.getItem('bucket');\n\n  // Get product Id\n  const productId = event.target.closest('li').dataset.id;\n\n  // Remove product Id from local Storage\n  const bucket = productsInCart.filter(item => item.id !== productId);\n  localStorage.setItem('bucket', bucket);\n\n  // Remove element from a list\n  event.target.closest('li').classList.add('hide-list-item');\n  setTimeout(() => {\n    event.target.closest('li').remove();\n    renderQuantityOrders();\n    countTotalPrice();\n\n    // If Shopping cart is empty, then show empty cart conteiner\n    if (bucket.length === 0) {\n      showEmptyCartContainer();\n    }\n  }, 1000);\n};\n\n// REMOVE ALL PRODUCTS\nconst onRemoveAllBtnClick = event => {\n  // Remove all items from bucket\n  localStorage.setItem('bucket', []);\n\n  // Remove items from a list\n  for (const item of refs.container.children) {\n    item.classList.add('hide-list-item');\n  }\n\n  renderQuantityOrders();\n  // Show empty Cart container\n  setTimeout(() => {\n    showEmptyCartContainer();\n  }, 800);\n};\n\n// CHANGE QTY\nconst onChangeQtyBtnClick = event => {\n  const button = event.target.closest('button');\n  if (\n    !button ||\n    (!button.classList.contains('qty-increment-btn') &&\n      !button.classList.contains('qty-decrement-btn'))\n  ) {\n    return;\n  }\n\n  // TODO: use one object for all local storage items keys\n  const productsInCart = localStorage.getItem('bucket');\n\n  const productId = event.target.closest('li').dataset.id;\n  const qtyValue = event.target\n    .closest('.product-item-price-qty')\n    .querySelector('.product-qty-value');\n\n  const bucket = productsInCart.map(product => {\n    if (product.id === productId) {\n      const qty = button.classList.contains('qty-increment-btn')\n        ? product.amount + 1\n        : product.amount > 1\n        ? product.amount - 1\n        : 1;\n\n      // Update UI\n      qtyValue.innerHTML = qty;\n\n      return { id: product.id, amount: qty, price: product.price };\n    }\n    return product;\n  });\n\n  // Update Local Storage\n  localStorage.setItem('bucket', bucket);\n  // Update Total Price\n  countTotalPrice();\n};\n\n// Add event listener on click remove item button\nrefs.container.addEventListener('click', onItemRemoveBtnClick);\nrefs.container.addEventListener('click', onChangeQtyBtnClick); // TODO: use ONLY one event listener\nrefs.deleteAllProductsBtn.addEventListener('click', onRemoveAllBtnClick);\n\n/**\n  |============================\n  | Rendering List of Products\n  |============================\n*/\nconst getProductsData = async productsInCart => {\n  const data = await Promise.all(\n    productsInCart.map(\n      async product => await foodAPI.getProductById(product.id)\n    )\n  );\n\n  return data;\n};\n\nconst renderProductsList = async () => {\n  try {\n    // TODO: use one object for all local storage items keys\n    const productsInCart = localStorage.getItem('bucket');\n\n    // Get Product Data from a server\n    const productsData = await getProductsData(productsInCart);\n\n    // Show empty cart container if nothing added to the cart\n    if (productsData.length === 0) {\n      showEmptyCartContainer();\n    } else {\n      showCartContainer();\n    }\n\n    // Generate Markup and update our container\n    const markup = productsData.map(productCardTemplate).join('');\n    refs.container.innerHTML = markup;\n\n    lazyLoadInstance.update();\n    renderQuantityOrders();\n    countTotalPrice();\n  } catch (error) {\n    // TODO: process Errors\n    console.log(error);\n  }\n};\n\nrenderProductsList();\n","module.exports = require('./helpers/bundle-url').getBundleURL('86U9d') + require('./helpers/bundle-manifest').resolve(\"ee16w\");","import sprite from '../../../images/sprite.svg';\nimport * as localStorage from '../../storage';\n\n// TODO: use one object for all local storage items keys\nconst productsInCart = localStorage.getItem('bucket');\n\nconst productCardTemplate = product => {\n  return `<li class=\"checkout-products-list-item\" data-id=\"${product._id}\">\n          <div class=\"checkout-product-item-card\">\n            <div class=\"checkout-product-item-card-img\">\n              <img\n                class=\"checkout-product-img lazy\"\n                src=\"${product.img}\"\n                alt=\"${product.name}\"\n                width=\"64\"\n                height=\"64\"\n                loading=\"lazy\"\n              />\n            </div>\n            <div class=\"product-item-card-details\">\n              <div class=\"product-item-attributes\">\n                <h3 class=\"product-item-name\">${product.name}</h3>\n                <p class=\"product-item-category\">\n                  <span class=\"product-item-catogry-label\">Category: </span>\n                  <span class=\"product-item-category-name\">${product.category\n                    .split('_')\n                    .join(' ')}</span>\n                </p>\n                <p class=\"product-item-size\">\n                  <span class=\"product-item-size-label\">Size: </span\n                  ><span class=\"product-item-size-name\">${product.size}</span>\n                </p>\n              </div>\n              <div class=\"product-item-price-qty\">\n                <div class=\"product-item-price\">$${parseFloat(\n                  product.price\n                ).toFixed(2)}</div>\n                <div class=\"product-item-qty\">\n                  <button class=\"qty-decrement-btn\">\n                    <svg class=\"icon-qty-decrement\" width=\"14\" height=\"14\">\n                      <use href=\"${sprite}#icon-minus\"></use>\n                    </svg>\n                  </button>\n                  <span class=\"product-qty-value\">${\n                    productsInCart.filter(item => item.id === product._id).pop()\n                      .amount\n                  }</span>\n                  <button class=\"qty-increment-btn\">\n                    <svg class=\"icon-qty-increment\" width=\"14\" height=\"14\">\n                      <use href=\"${sprite}#icon-plus\"></use>\n                    </svg>\n                  </button>\n                </div>\n              </div>\n            </div>\n            <button class=\"remove-item-btn\" type=\"button\">\n              <svg class=\"remove-item-btn-icon\" width=\"18\" height=\"18\">\n                <use href=\"${sprite}#icon-ion_close-sharp\"></use>\n              </svg>\n            </button>\n          </div>\n        </li>`;\n};\n\nexport default productCardTemplate;\n","import { getItem } from '../../storage';\n\nconst priceTitle = document.querySelector('.js-total-price');\n\nexport const countTotalPrice = () => {\n  const orders = getItem('bucket');\n  const totalValue = orders\n    .reduce((total, { amount, price }) => {\n      return total + amount * Number(price);\n    }, 0)\n    .toFixed(2);\n\n  const totalPrice = String(totalValue).replace(/\\./g, ',');\n  priceTitle.innerHTML = `&#36;${totalPrice}`;\n};\n"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$bpxeT","$89a149c522bdf2dd$exports","getBundleURL","resolve","$8b4e32d5a6d379be$var$productsInCart","getItem","$8b4e32d5a6d379be$export$2e2bcd8739ae039","product","concat","_id","img","name","category","split","join","size","parseFloat","price","toFixed","$parcel$interopDefault","filter","item","pop","amount","$12a49d8d97e99c0e$var$priceTitle","$jzQFI","document","querySelector","$12a49d8d97e99c0e$export$a7c9f95ca8a7c1b2","totalValue","reduce","total","param","Number","totalPrice","String","innerHTML","$628a64f58be156ab$var$lazyLoadInstance","$628a64f58be156ab$var$refs","container","deleteAllProductsBtn","emptyCartSection","shoppingCartSection","$628a64f58be156ab$var$showEmptyCartContainer","classList","add","remove","addEventListener","event","target","closest","contains","productsInCart","productId","dataset","bucket","setItem","setTimeout","$9TWV9","renderQuantityOrders","button","qtyValue","map","qty","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","children","Symbol","iterator","next","done","return","$628a64f58be156ab$var$getProductsData","$2TvXO","mark","_callee1","data","Promise","all","_callee","$b7ONl","getProductById","_ctx1","sent","$628a64f58be156ab$var$renderProductsList","productsData","markup","_ctx","update","console","log","t0"],"version":3,"file":"cart.a1d92d19.js.map"}